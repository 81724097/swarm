<tabs cur="cur.tab"></tabs>

<div class="tab-content">
  <div class="tab-pane active row">
    <div ng-if="cur.unit">
      <div class="col-md-8 pull-right">
        <!--h1><a href="#/unit/{{cur.tab.leadunit.unittype.label}}">
        </a></h1-->
        <h3>
          {{cur.unit.unittype.label}}
        </h3>
        <unit cur="cur.unit"></unit>
      </div>

      <div class="col-md-4">
        <table class="table unit-table table-hover" style="width:auto">
          <!-- filthy hack to show achievements on larvae page -->
          <tr ng-if="cur.tab.name == 'larva' && game.upgrade('achievementbonus').count() > 0">
            <td></td>
            <td class="titlecase"><a href="#/achievements">achievement points</a></td>
            <td>{{game.achievementPoints()|bignum:0}}</td>
          </tr>
          <tr ng-repeat="unit in cur.tab.sortedUnits | filter:filterVisible track by unit.name" ng-class="{active:unit.name===cur.unit.name}">
            <td class="upgrade-indicator">
              <span ng-if="unit.isNewlyUpgradable()" title="New upgrade available" class="animif glyphicon glyphicon-circle-arrow-up"></span>
            </td>
            <td>
              <a href="#/tab/{{cur.tab.name}}/unit/{{unit.unittype.label}}" class="titlecase">
                {{unit.unittype.label}}
              </a>
            </td>
            <td>
              {{unit.count()|bignum:0}}
            </td>
            <td ng-if="!cur.unit">
              <span ng-if="unit.velocity() != 0">
              +{{unit.velocity()|bignum}}/sec
              </span>
            </td>
          </tr>
        </table>
      </div>
    </div>

    <div class="col-md-12 table-responsive" ng-if="!cur.unit">
      <table class="table unit-table table-hover" style="width:auto">
        <!-- filthy hack to show achievements on larvae page -->
        <tr ng-if="cur.tab.name == 'larva' && game.upgrade('achievementbonus').count() > 0">
          <td class="upgrade-indicator"></td>
          <td class="titlecase"><a href="#/achievements">achievement points</a></td>
          <td>{{game.achievementPoints()|bignum:0}}</td>
          <td>+{{(game.upgrade('achievementbonus').stats().prod - 1) * 100|number:0}}% larvae</td>
        </tr>
        <tr ng-repeat="unit in cur.tab.sortedUnits | filter:filterVisible track by unit.name">
          <td class="upgrade-indicator">
            <span ng-if="unit.isNewlyUpgradable()" title="New upgrade available" class="animif glyphicon glyphicon-circle-arrow-up"></span>
          </td>
          <td>
            <a href="#/tab/{{cur.tab.name}}/unit/{{unit.unittype.label}}" class="titlecase">
              {{unit.unittype.label}}
            </a>
          </td>
          <td>
            {{unit.count()|bignum:0}}
          </td>
          <td>
            <span ng-if="unit.velocity() != 0">
            +{{unit.velocity()|bignum}}/sec
            </span>
          </td>
          <td ng-if="options.showAdvancedUnitData()">
            <buyunitdropdown unit="unit" num="1"></buyunitdropdown>
          </td>
        </tr>
      </table>
    </div>
  </div>
</div>
